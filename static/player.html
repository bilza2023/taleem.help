
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Taleem Player</title>

  <!-- Player Styles -->
  <link rel="stylesheet" href="./player/taleem-player-app.css" />
</head>

<body>

  <!-- Player Mount -->
  <div id="app"></div>

  <!-- Basic Controls -->
  <div class="nav-test">
    <button id="play-btn">‚ñ∂</button>
    <button id="pause-btn">‚è∏</button>
    <button id="stop-btn">‚èπ</button>

    <span id="time">0.0s</span>

    <div class="scrub-wrap">
      <input
        id="scrub"
        type="range"
        min="0"
        max="1"
        step="0.1"
      />
    </div>
  </div>

  <script type="module">
    import {
      createTaleemPlayer,
      resolveAssetPaths,
      resolveBackground,
      getDeckEndTime,
      createAudioTimer,
      startLoop
    } from "./player/taleem-player-app.js";

    async function init() {

      // üîµ CHANGE THIS to load your own deck
      const deckUrl = "./decks/test.json";

      const res = await fetch(deckUrl);
      if (!res.ok) {
        document.body.innerHTML = "<h2>Deck not found</h2>";
        throw new Error("Deck not found");
      }

      const deck = await res.json();

      // Fix image paths
      resolveAssetPaths(deck, "./images/");
      resolveBackground(deck, "./images/");

      // üîä Audio file (change if needed)
      const timer = createAudioTimer("./audio/music.mp3");

      // Create player
      const player = createTaleemPlayer({
        mount: "#app",
        deck
      });

      const duration = getDeckEndTime(deck);

      // Start playback
      startLoop({
        player,
        timer,
        duration,
        ui: {
          playBtn: document.getElementById("play-btn"),
          pauseBtn: document.getElementById("pause-btn"),
          stopBtn: document.getElementById("stop-btn"),
          scrub: document.getElementById("scrub"),
          timeEl: document.getElementById("time")
        }
      });
    }

    init();
  </script>

</body>
</html>
